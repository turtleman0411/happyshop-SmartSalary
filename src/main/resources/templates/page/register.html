<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh">

<head th:replace="~{layout/head :: head('註冊｜HappyShop', 'auth.css')}"></head>

<body class="auth">

  <div class="auth-wrap">

    <div class="auth-card">

      <h3 class="auth-title text-center">
        📝 註冊 HappyShop
      </h3>

      <!-- ===== Error Message（自動關閉） ===== -->
      <div th:if="${error != null}"
           class="alert rounded-3 mb-3 auto-close-alert"
           role="alert">
        <span th:text="${error}">錯誤訊息</span>
      </div>

      <form th:action="@{/register}"
            th:object="${register}"
            method="post"
            autocomplete="on">

        <!-- Username -->
        <div class="mb-3">
          <label class="form-label auth-label">帳號</label>
          <input type="text"
                 class="form-control auth-input"
                 th:field="*{name}"
                 placeholder="請輸入帳號"
                 autocomplete="username"
                 required>
        </div>

        <!-- Password -->
        <div class="mb-3">
          <label class="form-label auth-label">密碼</label>
          <input type="password"
                 class="form-control auth-input"
                 th:field="*{password}"
                 placeholder="請輸入密碼（至少 8 碼）"
                 minlength="8"
                 pattern=".{8,}"
                 title="密碼至少需要 8 個字元"
                 autocomplete="new-password"
                 required>

          <div class="auth-hint">
            密碼至少 <span class="fw-semibold">8</span> 碼
          </div>
        </div>

        <!-- Submit -->
        <div class="d-grid mb-3">
          <button type="submit" class="btn auth-submit">
            建立帳號
          </button>
        </div>

      </form>

      <!-- Links -->
      <div class="text-center auth-links">
        <a th:href="@{/happyshop/login}">
          已有帳號？前往登入
        </a>

        <div class="mt-2">
          <a th:href="@{/happyshop/home}" class="auth-back">
            ← 返回首頁
          </a>
        </div>
      </div>

    </div>
  </div>

  <!-- ===== Auto Close Script（只影響本頁 .auto-close-alert） ===== -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const alert = document.querySelector(".auto-close-alert");
      if (!alert) return;

      setTimeout(() => {
        alert.style.transition = "opacity 0.35s ease";
        alert.style.opacity = "0";
        setTimeout(() => alert.remove(), 350);
      }, 2500);
    });
  </script>

</body>
</html>
